{"ast":null,"code":"const LOAD_FOLLOWINGS = 'follows/LOAD_FOLLOWINGS';\nconst LOAD_FOLLOWERS = 'follows/LOAD_FOLLOWERS'; // const CREATE_FOLLOW = 'follows/CREATE_FOLLOW';\n\nconst DELETE_FOLLOW = 'follows/DELETE_FOLLOW';\n\nconst loadFollowings = followings => ({\n  type: LOAD_FOLLOWINGS,\n  payload: followings\n});\n\nconst loadFollowers = followers => ({\n  type: LOAD_FOLLOWERS,\n  payload: followers\n});\n\nconst createFollow = follow => ({\n  type: CREATE_FOLLOW,\n  payload: follow\n});\n\nconst deleteFollow = follow => ({\n  type: DELETE_FOLLOW,\n  payload: follow\n});\n\nexport const getFollowings = userId => async dispatch => {\n  const response = await fetch(`/api/users/${userId}/followings`);\n\n  if (response.ok) {\n    const followings = await response.json();\n    dispatch(loadFollowings(followings));\n    return followings;\n  }\n};\nexport const getFollowers = userId => async dispatch => {\n  const response = await fetch(`/api/users/${userId}/followers`);\n\n  if (response.ok) {\n    const followers = await response.json();\n    dispatch(loadFollowers(followers));\n    return followers;\n  }\n};\nexport const followUser = (followId, userId) => async dispatch => {\n  const response = await fetch(`/api/users/${userId}/follow`, {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"user_id\": userId,\n      \"follower_id\": followId\n    })\n  });\n\n  if (response.ok) {\n    const follow = await response.json();\n    dispatch(createFollow(follow));\n    return follow;\n  }\n};\nexport const unfollowUser = (followId, userId) => async dispatch => {\n  const response = await fetch(`/api/users/${userId}/follow`, {\n    method: 'DELETE',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      \"user_id\": userId,\n      \"follower_id\": followId\n    })\n  });\n\n  if (response.ok) {\n    const unfollow = await response.json();\n    dispatch(deleteFollow(unfollow));\n    return unfollow;\n  }\n};\nexport default function followReducer(state = {}, action) {\n  var _action$payload$follo, _action$payload$follo2;\n\n  switch (action.type) {\n    case LOAD_FOLLOWINGS:\n      const loadingState = { ...state,\n        followings: {}\n      };\n      (_action$payload$follo = action.payload.followings) === null || _action$payload$follo === void 0 ? void 0 : _action$payload$follo.forEach(user => loadingState.followings[user.id] = user);\n      return loadingState;\n\n    case LOAD_FOLLOWERS:\n      const loaderState = { ...state,\n        followers: {}\n      };\n      (_action$payload$follo2 = action.payload.followers) === null || _action$payload$follo2 === void 0 ? void 0 : _action$payload$follo2.forEach(user => loaderState.followers[user.id] = user);\n      return loaderState;\n\n    case CREATE_FOLLOW:\n      console.log('state =>', state);\n      const createState = JSON.parse(JSON.stringify(state));\n      console.log('action.payload =>', action.payload);\n      createState.followings[action === null || action === void 0 ? void 0 : action.payload.id] = action === null || action === void 0 ? void 0 : action.payload;\n      console.log('createState =>', createState);\n      return createState;\n\n    case DELETE_FOLLOW:\n      const deleteState = JSON.parse(JSON.stringify(state));\n      delete deleteState.followers[action.payload.id];\n      return deleteState;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/jaredburnett/Desktop/builds/aa_group_gamestagram/react-app/src/store/follow.js"],"names":["LOAD_FOLLOWINGS","LOAD_FOLLOWERS","DELETE_FOLLOW","loadFollowings","followings","type","payload","loadFollowers","followers","createFollow","follow","CREATE_FOLLOW","deleteFollow","getFollowings","userId","dispatch","response","fetch","ok","json","getFollowers","followUser","followId","method","headers","body","JSON","stringify","unfollowUser","unfollow","followReducer","state","action","loadingState","forEach","user","id","loaderState","console","log","createState","parse","deleteState"],"mappings":"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","sourcesContent":["const LOAD_FOLLOWINGS = 'follows/LOAD_FOLLOWINGS';\nconst LOAD_FOLLOWERS = 'follows/LOAD_FOLLOWERS';\n// const CREATE_FOLLOW = 'follows/CREATE_FOLLOW';\nconst DELETE_FOLLOW = 'follows/DELETE_FOLLOW';\n\nconst loadFollowings = followings => ({\n    type: LOAD_FOLLOWINGS,\n    payload: followings\n});\n\nconst loadFollowers = followers => ({\n    type: LOAD_FOLLOWERS,\n    payload: followers\n});\n\nconst createFollow = follow => ({\n    type: CREATE_FOLLOW,\n    payload: follow\n});\n\nconst deleteFollow = follow => ({\n    type: DELETE_FOLLOW,\n    payload: follow\n})\n\nexport const getFollowings = userId => async dispatch => {\n    const response = await fetch(`/api/users/${userId}/followings`);\n\n    if(response.ok) {\n        const followings = await response.json();\n        dispatch(loadFollowings(followings));\n        return followings;\n    }\n};\n\nexport const getFollowers = userId => async dispatch => {\n    const response = await fetch(`/api/users/${userId}/followers`);\n\n    if(response.ok) {\n        const followers = await response.json();\n        dispatch(loadFollowers(followers));\n        return followers;\n    }\n};\n\nexport const followUser = (followId, userId) => async dispatch => {\n    const response = await fetch(`/api/users/${userId}/follow`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\"user_id\": userId, \"follower_id\": followId})\n    });\n\n    if(response.ok) {\n        const follow = await response.json();\n        dispatch(createFollow(follow));\n        return follow;\n    }\n};\n\nexport const unfollowUser = (followId, userId) => async dispatch => {\n    const response = await fetch(`/api/users/${userId}/follow`, {\n        method: 'DELETE',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\"user_id\": userId, \"follower_id\": followId})\n    });\n\n    if(response.ok) {\n        const unfollow = await response.json();\n        dispatch(deleteFollow(unfollow));\n        return unfollow\n    }\n}\n\nexport default function followReducer(state = {}, action) {\n    switch (action.type) {\n        case LOAD_FOLLOWINGS:\n            const loadingState = {...state, followings: {}};\n            action.payload.followings?.forEach(user => loadingState.followings[user.id] = user);\n            return loadingState;\n        case LOAD_FOLLOWERS:\n            const loaderState = {...state, followers: {}};\n            action.payload.followers?.forEach(user => loaderState.followers[user.id] = user);\n            return loaderState;\n        case CREATE_FOLLOW:\n            console.log('state =>', state)\n            const createState = JSON.parse(JSON.stringify(state));\n            console.log('action.payload =>', action.payload)\n            createState.followings[action?.payload.id] = action?.payload;\n            console.log('createState =>', createState)\n            return createState;\n        case DELETE_FOLLOW:\n            const deleteState = JSON.parse(JSON.stringify(state));\n            delete deleteState.followers[action.payload.id];\n            return deleteState;\n        default:\n            return state;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}